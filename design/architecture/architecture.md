# AWS Data Processing Pipeline - Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                AWS CLOUD                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   S3 Bucket     â”‚    â”‚                  â”‚    â”‚         RDS                 â”‚ â”‚
â”‚  â”‚candidate-test-  â”‚    â”‚                  â”‚    â”‚     PostgreSQL              â”‚ â”‚
â”‚  â”‚    input        â”‚    â”‚     LAMBDA       â”‚    â”‚                             â”‚ â”‚
â”‚  â”‚                 â”‚â”€â”€â”€â–¶â”‚    FUNCTION      â”‚â”€â”€â”€â–¶â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ CSV files       â”‚    â”‚                  â”‚    â”‚  â”‚ file_metadata table â”‚   â”‚ â”‚
â”‚  â”‚ uploaded here   â”‚    â”‚ â€¢ Process CSV    â”‚    â”‚  â”‚ - id (SERIAL)       â”‚   â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚ â€¢ Count rows     â”‚    â”‚  â”‚ - filename          â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â€¢ Insert to RDS  â”‚    â”‚  â”‚ - status            â”‚   â”‚ â”‚
â”‚                          â”‚ â€¢ Write output   â”‚    â”‚  â”‚ - timestamp         â”‚   â”‚ â”‚
â”‚                          â”‚ â€¢ Backup file    â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                          â”‚ â€¢ Send SNS       â”‚    â”‚                             â”‚ â”‚
â”‚                          â””â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚   â”‚   â”‚                                           â”‚ â”‚
â”‚                             â”‚   â”‚   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                             â”‚   â”‚   â”‚           â”‚   S3 Output Bucket          â”‚ â”‚
â”‚                             â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ candidate-test-output       â”‚ â”‚
â”‚                             â”‚   â”‚               â”‚                             â”‚ â”‚
â”‚                             â”‚   â”‚               â”‚ result.json files           â”‚ â”‚
â”‚                             â”‚   â”‚               â”‚ (processing results)        â”‚ â”‚
â”‚                             â”‚   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚   â”‚                                               â”‚ â”‚
â”‚                             â”‚   â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                             â”‚   â”‚               â”‚      Secrets Manager        â”‚ â”‚
â”‚                             â”‚   â”‚               â”‚                             â”‚ â”‚
â”‚                             â”‚   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  DB Connection String       â”‚ â”‚
â”‚                             â”‚                   â”‚  Username & Password        â”‚ â”‚
â”‚                             â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                                   â”‚ â”‚
â”‚                             â””â”€â”€â”€â”                                               â”‚ â”‚
â”‚                                 â”‚                                               â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      Backup Bucket      â”‚     â”‚               â”‚         SNS Topic           â”‚ â”‚
â”‚  â”‚ candidate-test-backup   â”‚     â”‚               â”‚    (SHARED TOPIC)           â”‚ â”‚
â”‚  â”‚                         â”‚     â”‚               â”‚                             â”‚ â”‚
â”‚  â”‚ backup/2025-09-02_14-   â”‚â—„â”€â”€â”€â”€â”¤               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ 30-00_data.csv          â”‚     â”‚               â”‚  â”‚ Email Subscription  â”‚   â”‚ â”‚
â”‚  â”‚                         â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚ (interviewer email) â”‚   â”‚ â”‚
â”‚  â”‚ (timestamped files)     â”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚                     â”‚ â”‚
â”‚                                                                â–¼                     â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â–²                            â”‚ â”‚
â”‚  â”‚   CloudWatch Alarms      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚ â”‚
â”‚  â”‚                          â”‚                                                       â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                                        â”‚ â”‚
â”‚  â”‚ â”‚Error >0  â”‚ â”‚Dur. >5s â”‚ â”‚                                                        â”‚ â”‚
â”‚  â”‚ â”‚Alarm     â”‚ â”‚Alarm    â”‚ â”‚                                                        â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚ â”‚
â”‚                                                                                      â”‚ â”‚
â”‚                                                                â–¼                    â”‚ â”‚
â”‚                                                         ðŸ“§ EMAIL NOTIFICATION     â”‚ â”‚
â”‚                                                            (Success/Failure)      â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

1. **Upload**: CSV file uploaded to S3 bucket (candidate-test-input)
2. **Trigger**: S3 event triggers Lambda function automatically
3. **Process**: Lambda reads CSV, counts rows, stores metadata in RDS
4. **Output**: Lambda writes result.json to output bucket (candidate-test-output)
5. **Backup**: Lambda copies file to backup bucket with timestamp
6. **Notify**: Lambda publishes result to SNS â†’ Email sent to interviewer
7. **Monitor**: CloudWatch alarms monitor Lambda errors and duration â†’ Send alerts to SNS
8. **Deploy**: GitHub Actions automatically deploys code changes to Lambda